
# AI Agent 涉及的结构
User prompt： 用户独立的要求

System prompt ：有点像python中的global variable，主要内容包括人设，一些通用的要求

Function calling： 属于是对Agent和LLM（gpt等）之间交互的一种规范，因为LLM本质上是一个概率模型。会有回答出错的情况，而function calling的意义就是用json字段来实现统一模式，规范描述。

Normal answer ：Agent不经过处理，把用户说的内容直接给到AI，然后出问题了再修改，效率低。

MCP  ：是一种通信协议。是Agent和Agent tools之间的通信方式。针对的是那些每个Agent都可能会需要的tool，比如访问网页这种。利用MCP通信协议，让Agent统一托管这些工具，达到简化调用代码的目的。

AI Agent:在工具，模型，和AI之间传话的程序叫做AI agent，其中调用的函数，程序，就叫agent tool

# Chatflow 和 Workflow的区别
我觉得搞清楚flow和agent的意义及关系是最重要的。

首先先看flow中的两种

通俗来说，chatflow是需要对话来激活的，本质上你开发了一个在某个领域足够专业的机器人，里面有很多对话相关的变量设置

Workflow是可以被封装的一个工具包，较为死板，像python中写了一个函数，后面可以被反复的利用。

# Agent 和 Workflow的关系
指路：**b站 - SJTU肉装贝恩 - 学习** 收藏夹中

Agent和Workflow是两个极端；

Workflow：死板，可控，缺乏创新，根据任务的不同，要不断的更新迭代工作流；

Agent：模型自己判断，自己决定要怎么办，我目前认为什么都不做就是某种形式上的Agent，问题就在于太灵活，难以测试和迭代；

二者的关系：Agent中加入Workflow的内容，使其在某些环节可控，防止其天马行空，又保留一部分灵活性。
那其实反过来说也可以，事实上目前编排的Workflow中就有Agent存在的身影，比如 TEXT 2 SQL 项目中，Agent自己就会完成以下步骤：

从LLM精炼过后的语言提取对编写SQL指令有用的内容 ------- 编写SQL指令 ------- 从数据库中爬取数据

所以我认为不要把它们分开

但是可以预见在未来端到端就是趋势，也就是说Agent自己就会知道要写一个什么样的Workflow防止自己跑偏。

# 工作流创建会使用到的模块类型

## Http
如果使用大模型替代，问题在于：

（1）数据更新不及时

（2）大模型只是语言工具，处理不了复杂请求。

这部分属于前端的知识，**调用一个网站的api（在网站里创建）**，然后访问网站里面的内容  

## 代码块
把output的format调整成为想要的样子

开发(计算，排列......）


## LLM

里面要包括

1.上下文：你想让这个LLM处理的任务内容（包括文件，图片，文字等等等）

2.System

角色，任务，约束

3.模型选择


## 工具
这个其实和访问http属于并行的，问题在于：

（1）有的工具没有；

(2)有的工具功能不合心意

## AI生成图片
1.变量输入，这其中包括了prompt，和图片的一些参数，具体的变量名称来自图片生成网站的api使用文档；

2.Http请求，挂上图片生成网站的api，此时dify右侧的设置栏里会有一些需要填充的参数（比如post），答案就在网站里使用文档的api；

3.然后是从网站中把生成图片的一坨内容扒出来；

4.代码执行，将url（可以理解为对应图片的链接）从那一坨内容中提取出来；

5.生成图片。


## Text to SQL
### MCP：通信协议

### 整体工作流程
1.LLM优化提问内容

2.塞给Agent，做text---sql的转换

此处所需参数：mysql的IP地址，端口号，用户名，密码。

此处所需插件：Agent策略，（里面包含数据库查询）

3.输出查询结果

### Agent策略：里面包括了很多Tool。


### 合同审查
需要用到的插件：Markdown转pdf，markdown转word


